

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>transparentpath.gcsutils package &mdash; transparentpath 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="transparentpath.jsonencoder package" href="transparentpath.jsonencoder.html" />
    <link rel="prev" title="transparentpath package" href="transparentpath.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> transparentpath
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="transparentpath.html">transparentpath package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="transparentpath.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">transparentpath.gcsutils package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-transparentpath.gcsutils.methodtranslator">transparentpath.gcsutils.methodtranslator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-transparentpath.gcsutils.transparentpath">transparentpath.gcsutils.transparentpath module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-transparentpath.gcsutils">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="transparentpath.jsonencoder.html">transparentpath.jsonencoder package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="transparentpath.html#module-transparentpath">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">transparentpath</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="transparentpath.html">transparentpath package</a> &raquo;</li>
        
      <li>transparentpath.gcsutils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/transparentpath.gcsutils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transparentpath-gcsutils-package">
<h1>transparentpath.gcsutils package<a class="headerlink" href="#transparentpath-gcsutils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-transparentpath.gcsutils.methodtranslator">
<span id="transparentpath-gcsutils-methodtranslator-module"></span><h2>transparentpath.gcsutils.methodtranslator module<a class="headerlink" href="#module-transparentpath.gcsutils.methodtranslator" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="transparentpath.gcsutils.methodtranslator.MethodTranslator">
<em class="property">class </em><code class="sig-prename descclassname">transparentpath.gcsutils.methodtranslator.</code><code class="sig-name descname">MethodTranslator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">first_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">second_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">kwarg_names</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.methodtranslator.MethodTranslator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="transparentpath.gcsutils.methodtranslator.MethodTranslator.translate">
<code class="sig-name descname">translate</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Tuple</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; [&lt;class ‘str’&gt;, typing.Tuple, typing.Dict]<a class="headerlink" href="#transparentpath.gcsutils.methodtranslator.MethodTranslator.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>translate the method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> (<em>Tuple</em>) – </p></li>
<li><p><strong>**kwargs</strong> (<em>Dict</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The translated method name along with the given args and the
translated kwargs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[str, Tuple, Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.methodtranslator.MethodTranslator.translate_str">
<code class="sig-name descname">translate_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Tuple</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#transparentpath.gcsutils.methodtranslator.MethodTranslator.translate_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Tranlate the method as a string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> (<em>Tuple</em>) – </p></li>
<li><p><strong>**kwargs</strong> (<em>Dict</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The string of the translated method
new_method(arg1, arg2…, kwargs1=val1, translated_kwargs2=val2…)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="transparentpath.gcsutils.methodtranslator.MultiMethodTranslator">
<em class="property">class </em><code class="sig-prename descclassname">transparentpath.gcsutils.methodtranslator.</code><code class="sig-name descname">MultiMethodTranslator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">first_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">cases</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">second_names</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">kwargs_names</span><span class="p">:</span> <span class="n"><span class="p">[</span>typing.List<span class="p">[</span>typing.Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.methodtranslator.MultiMethodTranslator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="transparentpath.gcsutils.methodtranslator.MultiMethodTranslator.translate">
<code class="sig-name descname">translate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">case</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Tuple</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; [&lt;class ‘str’&gt;, typing.Tuple, typing.Dict]<a class="headerlink" href="#transparentpath.gcsutils.methodtranslator.MultiMethodTranslator.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>translate the method according to a case</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>case</strong> (<em>str</em>) – The name of the translation case to use</p></li>
<li><p><strong>*args</strong> (<em>Tuple</em>) – </p></li>
<li><p><strong>**kwargs</strong> (<em>Dict</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The translated method name along with the given args and the
translated kwargs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[str, Tuple, Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.methodtranslator.MultiMethodTranslator.translate_str">
<code class="sig-name descname">translate_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">case</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Tuple</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#transparentpath.gcsutils.methodtranslator.MultiMethodTranslator.translate_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Tranlate the method as a string according to a case</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>case</strong> (<em>str</em>) – The name of the translation case to use</p></li>
<li><p><strong>*args</strong> (<em>Tuple</em>) – </p></li>
<li><p><strong>**kwargs</strong> (<em>Dict</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The string of the translated method
new_method(arg1, arg2…, kwargs1=val1, translated_kwargs2=val2…)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-transparentpath.gcsutils.transparentpath">
<span id="transparentpath-gcsutils-transparentpath-module"></span><h2>transparentpath.gcsutils.transparentpath module<a class="headerlink" href="#module-transparentpath.gcsutils.transparentpath" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt id="transparentpath.gcsutils.transparentpath.MultipleExistenceError">
<em class="property">exception </em><code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">MultipleExistenceError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">ls</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.MultipleExistenceError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Exception raised when a path’s destination already contain more than
one element.</p>
</dd></dl>

<dl class="py class">
<dt id="transparentpath.gcsutils.transparentpath.MyHDFFile">
<em class="property">class </em><code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">MyHDFFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">remote</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.MyHDFFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">h5py._hl.files.File</span></code></p>
<p>Class to override h5py.File to handle files on GCS.</p>
<p>This allows to do :
&gt;&gt;&gt; from transparentpath import TransparentPath  # doctest: +SKIP
&gt;&gt;&gt; import numpy as np  # doctest: +SKIP
&gt;&gt;&gt; TransparentPath.set_global_fs(“gcs”, bucket=”bucket_name”, project=”project_name”)  # doctest: +SKIP
&gt;&gt;&gt; path = TransparentPath(“chien.hdf5”  # doctest: +SKIP
&gt;&gt;&gt;
&gt;&gt;&gt; with path.write() as ifile:  # doctest: +SKIP
&gt;&gt;&gt;     ifile[“data”] = np.array([1, 2])  # doctest: +SKIP</p>
</dd></dl>

<dl class="py class">
<dt id="transparentpath.gcsutils.transparentpath.MyHDFStore">
<em class="property">class </em><code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">MyHDFStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">remote</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.MyHDFStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.pytables.HDFStore</span></code></p>
<p>Same as MyHDFFile but for pd.HDFStore objects</p>
</dd></dl>

<dl class="py class">
<dt id="transparentpath.gcsutils.transparentpath.Myzipfile">
<em class="property">class </em><code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">Myzipfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.Myzipfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">zipfile.ZipFile</span></code></p>
<p>Overload of ZipFile class to handle files on GCS</p>
</dd></dl>

<dl class="py class">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath">
<em class="property">class </em><code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">TransparentPath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">, </span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">'.'</span></em>, <em class="sig-param"><span class="n">nocheck</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">collapse</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bucket</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">project</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">os.PathLike</span></code></p>
<p>Class that allows one to use a path in a local file system or a gcs file system (more or less) in almost the
same way one would use a pathlib.Path object. All instances of TransparentPath are absolute, even if created with
relative paths.</p>
<p>Doing ‘isinstance(path, str)’ with a TransparentPath will return True (required to allow ‘open(TransparentPath()’
to work). If you want to check whether path is actually a TransparentPath and nothing else, use ‘type(path) ==
TransparentPath’ instead.</p>
<p>If using a local file system, you do not have to set anything,
just instantiate your paths like that:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># noinspection PyShadowingNames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transparentpath</span> <span class="kn">import</span> <span class="n">TransparentPath</span> <span class="k">as</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mypath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;bar&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other_path</span> <span class="o">=</span> <span class="n">mypath</span> <span class="o">/</span> <span class="s2">&quot;stuff&quot;</span>
</pre></div>
</div>
<p>If using GCS, you will have to provide a bucket, and a project name. You can either use the class ‘set_global_fs’
method, specify the appropriate keywords when calling your first path, or giving a path that starts with
‘gs://bucketname/’. Then all the other paths will use the same file system.</p>
<p>So either do</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># noinspection PyShadowingNames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transparentpath</span> <span class="kn">import</span> <span class="n">TransparentPath</span> <span class="k">as</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="o">.</span><span class="n">set_global_fs</span><span class="p">(</span><span class="s1">&#39;gcs&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;my_bucket_name&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># will use GCS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mypath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># will use GCS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;foo2&quot;</span><span class="p">)</span>  
</pre></div>
</div>
<p>Or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># noinspection PyShadowingNames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transparentpath</span> <span class="kn">import</span> <span class="n">TransparentPath</span> <span class="k">as</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mypath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">fs</span><span class="o">=</span><span class="s1">&#39;gcs&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;my_bucket_name&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># will use GCS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;foo2&quot;</span><span class="p">)</span>  
</pre></div>
</div>
<p>Or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># noinspection PyShadowingNames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transparentpath</span> <span class="kn">import</span> <span class="n">TransparentPath</span> <span class="k">as</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mypath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;gs://my_bucket_name/foo&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># will use GCS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;foo2&quot;</span><span class="p">)</span>  
</pre></div>
</div>
<p>However, no matter how you initialise a remote file, gs://bucketname will never figure in its name. It will not be
stored in the underlying pathlib.Path object, and calling str(mypath) will not show it either. However, you can
retreive the full path including gs://bucketname if any by calling</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mypath</span><span class="o">.</span><span class="n">__fspath__</span><span class="p">()</span>  
<span class="go">gs://my_bucket_name/foo</span>
</pre></div>
</div>
<p>Note that your script must be able to log to GCS somehow. I generally use a service account with credentials
stored in a json file, and add the envirronement variable ‘GOOGLE_APPLICATION_CREDENTIALS=path_to_project_cred.json’
in my .bashrc. I haven’t tested any other method, but I guess that as long as gsutil works, TransparentPath will
too.
When trying to instantiate a remote path, TransparentPath will try to call the ‘ls()’ method of gcsfs. If it
fails, it will raise an error.</p>
<p>Since the bucket name is provided in set_fs or set_global_fs, you <strong>must not</strong> specify it in your paths.
Do not specify ‘gs://’ either, it is added when/if needed. Also, you should never create a directory with the same
name as your current bucket.</p>
<p>If your directories architecture on GCS is the same than localy up to some root directory, you can do:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># noinspection PyShadowingNames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transparentpath</span> <span class="kn">import</span> <span class="n">TransparentPath</span> <span class="k">as</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="o">.</span><span class="n">nas_dir</span> <span class="o">=</span> <span class="s2">&quot;/media/SERVEUR&quot;</span> <span class="c1"># it is the default value, but reset here for example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="o">.</span><span class="n">set_global_fs</span><span class="p">(</span><span class="s2">&quot;gcs&quot;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;my_bucket&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s2">&quot;my_project&quot;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/media/SERVEUR&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;chien&quot;</span> <span class="o">/</span> <span class="s2">&quot;chat&quot;</span>  <span class="c1"># Will be gs://my_bucket/chien/chat  </span>
</pre></div>
</div>
<p>If the line ‘Path.set_global_fs(…’ is not commented out, the resulting path will be ‘gs://my_bucket/chien/chat’.
If the line ‘Path.set_global_fs(…’ is commented out, the resulting path will be ‘/media/SERVEUR/chien/chat’.
This allows you to create codes that can run identically both localy and on gcs, the only difference being
the line ‘Path.set_global_fs(…’.</p>
<p>Any method or attribute valid in fsspec.implementations.local.LocalFileSystem, gcs.GCSFileSystem or pathlib.Path
can be used on a TransparentPath object. However, setting an attribute is not transparent : if, for
example, you want to change the path’s name, you need to do</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;new_name&quot;</span>  
</pre></div>
</div>
<p>instead of ‘p.name = “new_name”’. ‘p.path’ points to the underlying pathlib.Path object.</p>
<p>TransparentPath has built-in read and write methods that recognize the file’s suffix to call the appropriate
method (csv, parquet, hdf5, json or open). It has a built-in override of open, which allows you to pass a
TransparentPath to python’s open method.</p>
<dl>
<dt>WARNINGS if you use GCS:</dt><dd><p>1: Remember that directories are not a thing on GCS.</p>
<p>2: The is_dir() method exists but, on GCS, only makes sense if tested on a part of an existing path,
i.e not on a leaf.</p>
<p>3: You do not need the parent directories of a file to create the file : they will be created if they do not
exist (that is not true localy however).</p>
<p>4: If you delete a file that was alone in its parent directories, those directories disapear.</p>
<p>5: Since most of the times we use is_dir() we want to check whether a directry exists to write in it,
by default the is_dir() method will return True if the directory does not exists on GCS (see point 3)(will
still return false if using a local file system).</p>
<p>6: The only case is_dir() will return False is if a file with the same name exists (localy, behavior is
straightforward).</p>
<p>7: To actually check whether the directory exists (for, like, reading from it), add the kwarg ‘exist=True’ to
is_dir() if using GCS.</p>
<p>8: If a file exists with the same path than a directory, then the class is not able to know which one is the
file and which one is the directory, and will raise a MultipleExistenceError at object creation. Will also
check for multiplicity at almost every method in case an exterior source created a duplicate of the
file/directory.</p>
</dd>
</dl>
<p>If a method in a package you did not create uses the os.open(), you will have to create a class to override this
method and anything using its ouput. Indeed os.open returns a file descriptor, not an IO, and I did not find a
way to access file descriptors on gcs. For example, in the FileLock package, the acquire() method calls the
_acquire() method which calls os.open(), so I had to do that:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">filelock</span> <span class="kn">import</span> <span class="n">FileLock</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transparentpath</span> <span class="kn">import</span> <span class="n">TransparentPath</span> <span class="k">as</span> <span class="n">Tp</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyFileLock</span><span class="p">(</span><span class="n">FileLock</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="nf">_acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">tmp_lock_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock_file</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">tmp_lock_file</span><span class="p">)</span> <span class="o">==</span> <span class="n">Tp</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">tmp_lock_file</span> <span class="o">=</span> <span class="n">Tp</span><span class="p">(</span><span class="n">tmp_lock_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">try</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">fd</span> <span class="o">=</span> <span class="n">tmp_lock_file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">,</span> <span class="ne">FileExistsError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="bp">self</span><span class="o">.</span><span class="n">_lock_file_fd</span> <span class="o">=</span> <span class="n">fd</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
<p>The original method was:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">_acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">open_mode</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">O_WRONLY</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_CREAT</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_EXCL</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_TRUNC</span>  
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">try</span><span class="p">:</span>  
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">fd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lock_file</span><span class="p">,</span> <span class="n">open_mode</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>  
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">pass</span>  
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">else</span><span class="p">:</span>  
<span class="gp">&gt;&gt;&gt; </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_lock_file_fd</span> <span class="o">=</span> <span class="n">fd</span>  
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="kc">None</span>  
</pre></div>
</div>
<p>I tried to implement a working version of any method valid in pathlib.Path or in file systems, but futur changes
in any of those will not be taken into account quickly.</p>
<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.append" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.bucket">
<code class="sig-name descname">bucket</code><em class="property"> = None</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.bucket" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.cast_fast">
<code class="sig-name descname">cast_fast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.cast_fast" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.cast_slow">
<code class="sig-name descname">cast_slow</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.cast_slow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.cd">
<code class="sig-name descname">cd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.cd" title="Permalink to this definition">¶</a></dt>
<dd><p>cd-like command</p>
<p>Will collapse double-dots (‘..’), so not compatible with symlinks. If path is absolute (starts with ‘/’ or
bucket name or is empty), will return a path starting from root directory if FileSystem is local, from bucket
if it is GCS. If passing None or “” , will have the same effect than “/” on GCS, will return the current
working directory on local. If passing “.”, will return a path at the location of self. Will raise an error
if trying to access a path before root or bucket.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – The path to cd to. Absolute, or relative to self.
(Default value = None)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>newpath</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>the absolute TransparentPath we cded to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.check_multiplicity">
<code class="sig-name descname">check_multiplicity</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.check_multiplicity" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if several objects correspond to the path.
Raises MultipleExistenceError if so, does nothing if not.</p>
</dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.cli">
<code class="sig-name descname">cli</code><em class="property"> = None</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.cli" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.cwd">
<code class="sig-name descname">cwd</code><em class="property"> = '/home/pcotte/Documents/git/transparentpath/docs'</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.cwd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.do_nothing">
<code class="sig-name descname">do_nothing</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.do_nothing" title="Permalink to this definition">¶</a></dt>
<dd><p>does nothing (you don’t say)</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.exist">
<code class="sig-name descname">exist</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.exist" title="Permalink to this definition">¶</a></dt>
<dd><p>To prevent typo of ‘exist()’ without an -s</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.exists">
<code class="sig-name descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.fs_kind">
<code class="sig-name descname">fs_kind</code><em class="property"> = ''</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.fs_kind" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.fss">
<code class="sig-name descname">fss</code><em class="property"> = {}</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.fss" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">loc</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.get" title="Permalink to this definition">¶</a></dt>
<dd><p>used to get a remote file to local.</p>
<p>self must be a gcs TransparentPath. If loc is a TransparentPath, it must be local. If it is a pathlib.Path or
a str, it will be casted into a local TransparentPath.</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.get_absolute">
<code class="sig-name descname">get_absolute</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.get_absolute" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns self, since all TransparentPaths are absolute</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">TransparentPath</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.glob">
<code class="sig-name descname">glob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wildcard</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'/*'</span></em>, <em class="sig-param"><span class="n">fast</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Iterator<span class="p">[</span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of TransparentPath matching the wildcard pattern</p>
<p>By default, the wildcard is ‘/<a href="#id1"><span class="problematic" id="id2">*</span></a>’. The ‘/’ is important if your path is a dir and you want to glob inside the
dir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wildcard</strong> (<em>str</em>) – The wilcard pattern to match, relative to self (Default value = “/<a href="#id3"><span class="problematic" id="id4">*</span></a>”)</p></li>
<li><p><strong>fast</strong> (<em>bool</em>) – If True, does not check multiplicity when converting output paths to TransparentPath, significantly
speeding up the process (Default value = False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of items matching the pattern</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[<a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">TransparentPath</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.is_dir">
<code class="sig-name descname">is_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exist</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.is_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if self is a directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exist</strong> (<em>bool</em>) – If False and if using GCS, is_dir() returns True if the directory does not exist and no file with
the same path exist. Otherwise, only returns True if the directory really exists (Default value = False).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.is_file">
<code class="sig-name descname">is_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.is_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if self is a file
On GCS, leaves are always files even if created with mkdir.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.ls">
<code class="sig-name descname">ls</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">fast</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; Iterator<span class="p">[</span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>ls-like method. Returns an Iterator of absolute TransparentPaths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – relative path to ls. (Default value = “”)</p></li>
<li><p><strong>fast</strong> (<em>bool</em>) – If True, does not check multiplicity when converting output
paths to TransparentPath, significantly speeding up the process
(Default value = False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[<a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">TransparentPath</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.method_path_concat">
<code class="sig-name descname">method_path_concat</code><em class="property"> = []</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.method_path_concat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.method_without_self_path">
<code class="sig-name descname">method_without_self_path</code><em class="property"> = ['end_transaction', 'get_mapper', 'read_block', 'start_transaction', 'connect', 'load_tokens']</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.method_without_self_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.mkbucket">
<code class="sig-name descname">mkbucket</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.mkbucket" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.mkdir">
<code class="sig-name descname">mkdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the directory corresponding to self if does not exist</p>
<p>Remember that leaves are always files on GCS, so can not create a directory on GCS. Thus, the function will
have no effect on GCS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>present</strong> (<em>str</em>) – What to do if there is already something at self. Can be “raise” or “ignore” (Default value = “ignore”)</p></li>
<li><p><strong>kwargs</strong> – The kwargs to pass to file system’s mkdir method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.mv">
<code class="sig-name descname">mv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.mv" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to move two files on the same file system.</p>
</dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.nas_dir">
<code class="sig-name descname">nas_dir</code><em class="property"> = '/media/SERVEUR'</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.nas_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; IO<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the file system open method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> – Any args valid for the builtin open() method</p></li>
<li><p><strong>kwargs</strong> – Any kwargs valid for the builtin open() method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The IO buffer object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>IO</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.project">
<code class="sig-name descname">project</code><em class="property"> = None</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.project" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.put">
<code class="sig-name descname">put</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dst</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.put" title="Permalink to this definition">¶</a></dt>
<dd><p>used to push a local file to the cloud.</p>
<p>self must be a local TransparentPath. If dst is a TransparentPath, it must be on GCS. If it is a pathlib.Path
or a str, it will be casted into a GCS TransparentPath, so a gcs file system must have been set up once
before.</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">get_obj</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">use_pandas</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_dask</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Method used to read the content of the file located at self</p>
<p>Will raise FileNotFound error if there is no file. Calls a specific method to read self based on the suffix
of self.path:</p>
<blockquote>
<div><p>1: .csv : will use pandas’s read_csv</p>
<p>2: .parquet : will use pandas’s read_parquet with pyarrow engine</p>
<p>3: .hdf5 or .h5 : will use h5py.File or pd.HDFStore (if use_pandas = True). Since it does not support
remote file systems, the file will be downloaded localy in a tmp file read, then removed.</p>
<p>4: .json : will use open() method to get file content then json.loads to get a dict</p>
<p>5: .xlsx : will use pd.read_excel</p>
<p>6: any other suffix : will return a IO buffer to read from, or the string contained in the file if
get_obj is False.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_obj</strong> (<em>bool</em>) – Only relevant for files that are not csv, parquet nor HDF5. If True returns the IO Buffer,
else the string contained in the IO Buffer (Default value = False)</p></li>
<li><p><strong>use_pandas</strong> (<em>bool</em>) – Must pass it as True if hdf5 file was written using HDFStore and not h5py.File (Default value = False)</p></li>
<li><p><strong>update_cache</strong> (<em>bool</em>) – FileSystem objects do not necessarily follow changes on the system in real time if they were not
perfermed by them directly. If update_cache is True, the FileSystem will update its cache before trying
to read anything. If False, it won’t, potentially saving some time but this might result in a
FileNotFoundError. (Default value = True)</p></li>
<li><p><strong>use_dask</strong> (<em>bool</em>) – To return a Dask DataFrame instead of a pandas DataFrame. Only makes sense if file suffix is xlsx, csv,
parquet. (Default value = False)</p></li>
<li><p><strong>args</strong> – any args to pass to the underlying reading method</p></li>
<li><p><strong>kwargs</strong> – any kwargs to pass to the underlying reading method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.read_csv">
<code class="sig-name descname">read_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_dask</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.read_csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.read_excel">
<code class="sig-name descname">read_excel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_dask</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.read_excel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.read_hdf5">
<code class="sig-name descname">read_hdf5</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_pandas</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">use_dask</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">set_names</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>h5py._hl.files.File<span class="p">, </span>pandas.io.pytables.HDFStore<span class="p">, </span>dask.dataframe.core.DataFrame<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.read_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a HDF5 file. Must have been created by h5py.File or pd.HDFStore (specify use_pandas=True if so)</p>
<p>Since h5py.File/pd.HDFStore does not support GCS, first copy it in a tmp file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update_cache</strong> (<em>bool</em>) – FileSystem objects do not necessarily follow changes on the system if they were not perfermed by them
directly. If update_cache is True, the FileSystem will update its cache before trying to read anything.
If False, it won’t, potentially saving some time but this might result in a FileNotFoundError. (Default
value = True)</p></li>
<li><p><strong>use_pandas</strong> (<em>bool</em>) – To use HDFStore instead of h5py.File (Default value = False)</p></li>
<li><p><strong>use_dask</strong> (<em>bool</em>) – To indicate that the HDF5 should be opened using dask.dataframe.read_hdf(). (Default value = False)</p></li>
<li><p><strong>set_names</strong> (<em>str</em>) – See using dask.dataframe.read_hdf()’s ‘key’ argument. (Default value = “”)</p></li>
<li><p><strong>kwargs</strong> – The kwargs to pass to h5py.File/pd.HDFStore method, or to dask.dataframe.read_hdf()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Opened h5py.File/pd.HDFStore</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[h5py.File, pd.HDFStore]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.read_parquet">
<code class="sig-name descname">read_parquet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_dask</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>pandas.core.frame.DataFrame<span class="p">, </span>pandas.core.series.Series<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.read_parquet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.read_text">
<code class="sig-name descname">read_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">get_obj</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>str<span class="p">, </span>IO<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.read_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.rm">
<code class="sig-name descname">rm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">absent</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'raise'</span></em>, <em class="sig-param"><span class="n">ignore_kind</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.rm" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the object pointed to by self if exists.
Remember that leaves are always files on GCS, so rm will remove the path if it is a leaf on GCS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>absent</strong> (<em>str</em>) – What to do if trying to remove an item that does not exist. Can
be ‘raise’ or ‘ignore’ (Default value = ‘raise’)</p></li>
<li><p><strong>ignore_kind</strong> (<em>bool</em>) – If True, will remove anything pointed by self. If False,
will raise an error if self points to a file and ‘recursive’ was
specified in kwargs, or if self point to a dir and ‘recursive’
was not specified (Default value = False)</p></li>
<li><p><strong>kwargs</strong> – The kwargs to pass to file system’s rm method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.rmbucket">
<code class="sig-name descname">rmbucket</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.rmbucket" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.rmdir">
<code class="sig-name descname">rmdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">absent</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'raise'</span></em>, <em class="sig-param"><span class="n">ignore_kind</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.rmdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the directory corresponding to self if exists
Remember that leaves are always files on GCS, so rmdir will never remove a leaf on GCS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>absent</strong> (<em>str</em>) – What to do if trying to remove an item that does not exist. Can
be ‘raise’ or ‘ignore’ (Default value = ‘raise’)</p></li>
<li><p><strong>ignore_kind</strong> (<em>bool</em>) – If True, will remove anything pointed by self. If False,
will raise an error if self points to a file and ‘recursive’ was
specified in kwargs, or if self point to a dir and ‘recursive’
was not specified (Default value = False)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.set_fs">
<code class="sig-name descname">set_fs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">bucket</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">project</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nas_dir</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">, </span>pathlib.Path<span class="p">, </span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.set_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be called to set the file system, if ‘fs’ keyword was not given at object creation. If not called,
default file system is that of TransparentPath. If TransparentPath has no file system yet, creates a local
one by default. If the first parameter is ‘lcoal’, the file system is local, and bucket and project are
not needed. If the first parameter is ‘gcs’, file system is GCS and bucket and project are needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fs</strong> (<em>str</em>) – ‘gcs’ will use GCSFileSystem, ‘local’ will use LocalFileSystem</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – The bucket name if using gcs (Default value =  None)</p></li>
<li><p><strong>project</strong> (<em>str</em>) – The project name if using gcs (Default value = None)</p></li>
<li><p><strong>nas_dir</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath"><em>TransparentPath</em></a><em>, </em><em>Path</em><em>, </em><em>str</em><em>]</em>) – If specified, TransparentPath will delete any occurence of ‘nas_dir’ at the beginning of created paths if fs
is gcs (Default value = none).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.set_global_fs">
<em class="property">classmethod </em><code class="sig-name descname">set_global_fs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fs</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">bucket</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">project</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">make_main</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">nas_dir</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">, </span>pathlib.Path<span class="p">, </span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.set_global_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>To call before creating any instance to set the file system.</p>
<p>If not called, default file system is local. If the first parameter is ‘local’, the file system is local,
and ‘bucket’ and ‘project’ are not needed. If the first parameter is ‘gcs’, file system is GCS and ‘bucket’ and
‘project’ are needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fs</strong> (<em>str</em>) – ‘gcs’ will use GCSFileSystem, ‘local’ will use LocalFileSystem</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – The bucket name if using gcs (Default value =  None)</p></li>
<li><p><strong>project</strong> (<em>str</em>) – The project name if using gcs (Default value = None)</p></li>
<li><p><strong>make_main</strong> (<em>bool</em>) – If True, any instance created after this call to set_global_fs will be fs. If False, just add the new
file system to cls.fss, but do not use it as default file system. (Default value = True)</p></li>
<li><p><strong>nas_dir</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath"><em>TransparentPath</em></a><em>, </em><em>Path</em><em>, </em><em>str</em><em>]</em>) – If specified, TransparentPath will delete any occurence of ‘nas_dir’ at the beginning of created paths if fs
is gcs (Default value = None).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.set_nas_dir">
<em class="property">static </em><code class="sig-name descname">set_nas_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">nas_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.set_nas_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.stat">
<code class="sig-name descname">stat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls file system’s stat method and translates the key to os.stat_result() keys</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.to_csv">
<code class="sig-name descname">to_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>pandas.core.frame.DataFrame<span class="p">, </span>pandas.core.series.Series<span class="p">, </span>dask.dataframe.core.DataFrame<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>None<span class="p">, </span>List<span class="p">[</span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Warning : if data is a Dask dataframe, the output might be written in multiple file. one can always specify
single_file=True, but that is not supported in GCS. If only one file is produced, then this file will be
moved to self.</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.to_excel">
<code class="sig-name descname">to_excel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>pandas.core.frame.DataFrame<span class="p">, </span>pandas.core.series.Series<span class="p">, </span>dask.dataframe.core.DataFrame<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.to_excel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.to_hdf5">
<code class="sig-name descname">to_hdf5</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">set_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_pandas</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>None<span class="p">, </span>h5py._hl.files.File<span class="p">, </span>pandas.io.pytables.HDFStore<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.to_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>Any</em>) – The data to store. Can be None, in that case an opened file is returned (Default value = None)</p></li>
<li><p><strong>set_name</strong> (<em>str</em>) – The name of the dataset (Default value = None)</p></li>
<li><p><strong>update_cache</strong> (<em>bool</em>) – FileSystem objects do not necessarily follow changes on the system if they were not perfermed by them
directly. If update_cache is True, the FileSystem will update its cache before trying to read anything.
If False, it won’t, potentially saving some time but this might result in a FileExistError. (Default
value = True)</p></li>
<li><p><strong>use_pandas</strong> (<em>bool</em>) – To use pd.HDFStore object instead of h5py.File (Default = False)</p></li>
<li><p><strong>**kwargs</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[None, pd.HDFStore, h5py.File]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.to_json">
<code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.to_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.to_parquet">
<code class="sig-name descname">to_parquet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>pandas.core.frame.DataFrame<span class="p">, </span>pandas.core.series.Series<span class="p">, </span>dask.dataframe.core.DataFrame<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">columns_to_string</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">to_dataframe</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.to_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>Warning : if data is a Dask dataframe, the output will be written in a directory. For convenience, the directory
if self.with_suffix(“”). Reading is transparent and one can specify a path with .parquet suffix.</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.touch">
<code class="sig-name descname">touch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">create_parents</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the file corresponding to self if does not exist.</p>
<p>Raises FileExistsError if there already is an object that is not a file at self. Default behavior is to
create parent directories of the file if needed. This can be canceled by passing ‘create_parents=False’, but
only if not using GCS, since directories are not a thing on GCS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>present</strong> (<em>str</em>) – What to do if there is already something at self. Can be “raise” or “ignore” (Default value = “ignore”)</p></li>
<li><p><strong>create_parents</strong> (<em>bool</em>) – If False, raises an error if parent directories are absent. Else, create them. Always True on GCS. (
Default value = True)</p></li>
<li><p><strong>kwargs</strong> – The kwargs to pass to file system’s touch method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.transform_path">
<code class="sig-name descname">transform_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Tuple</span></em><span class="sig-paren">)</span> &#x2192; Tuple<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.transform_path" title="Permalink to this definition">¶</a></dt>
<dd><p>File system methods take self.path as first argument, so add its absolute path as first argument of args.
Some, like ls or glob, are given a relative path to append to self.path, so we need to change the first
element of args from args[0] to self.path / args[0]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method_name</strong> (<em>str</em>) – The method name, to check whether it needs to append self.path
or not</p></li>
<li><p><strong>args</strong> (<em>Tuple</em>) – The args to pass to the method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either the unchanged args, or args with the first element
prepended by self, or args with a new first element (self)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.translations">
<code class="sig-name descname">translations</code><em class="property"> = {'mkdir': &lt;transparentpath.gcsutils.methodtranslator.MultiMethodTranslator object&gt;}</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.translations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.unlink">
<code class="sig-name descname">unlink</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.unlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias of rm, to match pathlib.Path method</p>
</dd></dl>

<dl class="py attribute">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.unset">
<code class="sig-name descname">unset</code><em class="property"> = True</em><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.unset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.update_cache">
<code class="sig-name descname">update_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.update_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls FileSystem’s invalidate_cache() to discard the cache then calls a non-distruptive method (fs.info(
bucket)) to update it.</p>
<p>If local, on need to update the chache. Not even sure it needs to be invalidated…</p>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.with_suffix">
<code class="sig-name descname">with_suffix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">suffix</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.with_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new TransparentPath object with a changed suffix
Uses the with_suffix method of pathlib.Path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>suffix</strong> (<em>str</em>) – suffix to use, with the dot (‘.pdf’, ‘.py’, etc ..)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">TransparentPath</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">set_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'data'</span></em>, <em class="sig-param"><span class="n">use_pandas</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">make_parents</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>None<span class="p">, </span>pandas.io.pytables.HDFStore<span class="p">, </span>h5py._hl.files.File<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Method used to write the content of the file located at self</p>
<p>Calls a specific method to write data based on the suffix of self.path:</p>
<blockquote>
<div><p>1: .csv : will use pandas’s to_csv</p>
<p>2: .parquet : will use pandas’s to_parquet with pyarrow engine</p>
<p>3: .hdf5 or .h5 : will use h5py.File. Since it does not support remote file systems, the file will be
created localy in a tmp filen written to, then uploaded and removed localy.</p>
<p>4: .json : will use jsonencoder.JSONEncoder class. Works with DataFrames and np.ndarrays too.</p>
<p>5: .xlsx : will use pandas’s to_excel</p>
<p>5: any other suffix : uses self.open to write to an IO Buffer</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>Any</em>) – The data to write</p></li>
<li><p><strong>set_name</strong> (<em>str</em>) – Name of the dataset to write. Only relevant if using HDF5 (Default value = ‘data’)</p></li>
<li><p><strong>use_pandas</strong> (<em>bool</em>) – Must pass it as True if hdf file must be written using HDFStore and not h5py.File</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – If True, any existing file will be overwritten. Only relevant for csv, hdf5 and parquet files,
since others use the ‘open’ method, which args already specify what to do (Default value = True).</p></li>
<li><p><strong>present</strong> (<em>str</em>) – Indicates what to do if overwrite is False and file is present. Here too, only relevant for csv,
hsf5 and parquet files.</p></li>
<li><p><strong>update_cache</strong> (<em>bool</em>) – FileSystem objects do not necessarily follow changes on the system if they were not perfermed by them
directly. If update_cache is True, the FileSystem will update its cache before trying to read anything.
If False, it won’t, potentially saving some time but this might result in a FileExistError. (Default
value = True)</p></li>
<li><p><strong>make_parents</strong> (<em>bool</em>) – If True and if the parent arborescence does not exist, it is created. (Default value = False)</p></li>
<li><p><strong>args</strong> – any args to pass to the underlying writting method</p></li>
<li><p><strong>kwargs</strong> – any kwargs to pass to the underlying reading method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[None, pd.HDFStore, h5py.File]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.write_bytes">
<code class="sig-name descname">write_bytes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.write_bytes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="transparentpath.gcsutils.transparentpath.TransparentPath.write_stuff">
<code class="sig-name descname">write_stuff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">present</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'ignore'</span></em>, <em class="sig-param"><span class="n">update_cache</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.TransparentPath.write_stuff" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.apply_index_and_date">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">apply_index_and_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index_col</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">parse_dates</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">df</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>pandas.core.frame.DataFrame<span class="p">, </span>dask.dataframe.core.DataFrame<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>pandas.core.frame.DataFrame<span class="p">, </span>dask.dataframe.core.DataFrame<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.apply_index_and_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.check_kwargs">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">check_kwargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span><span class="p">:</span> <span class="n">Callable</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.check_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes as argument a method and some kwargs. Will like in the method signature et return in two separate dict
the kwargs that are in the signature and those that are not.</p>
<p>If the method does not return any signature or if it explicitely accepts <a href="#id5"><span class="problematic" id="id6">**</span></a>kwargs, does not do anything</p>
</dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.collapse_ddots">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">collapse_ddots</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>pathlib.Path<span class="p">, </span><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><span class="p">, </span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">transparentpath.gcsutils.transparentpath.TransparentPath</a><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.collapse_ddots" title="Permalink to this definition">¶</a></dt>
<dd><p>Collapses the double-dots (..) in the path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Union</em><em>[</em><em>Path</em><em>, </em><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath"><em>TransparentPath</em></a><em>, </em><em>str</em><em>]</em>) – The path containing double-dots</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The collapsed path.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#transparentpath.gcsutils.transparentpath.TransparentPath" title="transparentpath.gcsutils.transparentpath.TransparentPath">TransparentPath</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.get_fs">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">get_fs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gcs</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">project</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">bucket</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>gcsfs.core.GCSFileSystem<span class="p">, </span>fsspec.implementations.local.LocalFileSystem<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.get_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the FileSystem object of either gcs or local (Default)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gcs</strong> (<em>str</em>) – Returns GCSFileSystem if ‘gcs’’, LocalFilsSystem if ‘local’.</p></li>
<li><p><strong>project</strong> (<em>str</em>) – project name for GCS</p></li>
<li><p><strong>bucket</strong> (<em>str</em>) – bucket name for GCS</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The FileSystem object and the string ‘gcs’ or ‘local’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[gcsfs.GCSFileSystem, LocalFileSystem]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.get_index_and_date_from_kwargs">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">get_index_and_date_from_kwargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>int<span class="p">, </span>bool<span class="p">, </span>dict<span class="p">]</span><a class="headerlink" href="#transparentpath.gcsutils.transparentpath.get_index_and_date_from_kwargs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.myisinstance">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">myisinstance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="n">obj2</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.myisinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return True when testing whether a TransparentPath is a str (required to use open(TransparentPath()))
and False when testing whether a pathlib.Path is a TransparentPath.</p>
</dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.myopen">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">myopen</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; IO<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.myopen" title="Permalink to this definition">¶</a></dt>
<dd><p>Method overloading builtins’ ‘open’ method, allowing to open files on GCS using TransparentPath.</p>
</dd></dl>

<dl class="py function">
<dt id="transparentpath.gcsutils.transparentpath.mysmallisinstance">
<code class="sig-prename descclassname">transparentpath.gcsutils.transparentpath.</code><code class="sig-name descname">mysmallisinstance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="n">obj2</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#transparentpath.gcsutils.transparentpath.mysmallisinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return True when testing whether a TransparentPath is a str (required to use open(TransparentPath()))
or a TransparentPath, and False in every other cases (even pathlib.Path).</p>
</dd></dl>

</div>
<div class="section" id="module-transparentpath.gcsutils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-transparentpath.gcsutils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="transparentpath.jsonencoder.html" class="btn btn-neutral float-right" title="transparentpath.jsonencoder package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="transparentpath.html" class="btn btn-neutral float-left" title="transparentpath package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Cotte Philipe, Advestis

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>